jQuery(document).ready(function($){$('.subscribe-form').on('submit',function(e){e.preventDefault();subsribeToList($(this))});function subsribeToList(thisObj){let email=$('#email',thisObj).val();let listId=$('#list_id',thisObj).val();let success_message=$('#success_message',thisObj).val();let error_message=$('#error_message',thisObj).val();let redirect_to=$('#redirect_to',thisObj).val();let pdfurl=$('#pdfurl',thisObj).val();$.ajax({type:'POST',url:mailjet_ajax_object.ajax_url,data:{action:'mailjet_subscribe',email:email,list_id:listId,success_message:success_message,error_message:error_message,redirect_to:redirect_to,pdfurl:pdfurl,_ajax_nonce:mailjet_ajax_object.nonce},success:function(response){if(response.success){thisObj.hide();thisObj.next().show().text(response.data);if(redirect_to!==undefined){setTimeout(function(){window.location.href=redirect_to},2000)}
if(pdfurl!==undefined){downloadPDF(pdfurl)}}else{thisObj.hide();thisObj.next().show().text(response.data)}},error:function(){thisObj.next().show().text('An error occurred. Please try again.')}})}
function downloadPDF(url){let pdfTitle=url.split('/').pop();const anchor=document.createElement('a');anchor.href=url;anchor.download=pdfTitle;document.body.appendChild(anchor);anchor.click();document.body.removeChild(anchor)}})